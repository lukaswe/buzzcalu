<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>BuzzCaLu Overview Screen</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="libraries/jquery-3.2.1.min.js"></script>
    <link href="styles/overview.css" type="text/css" rel="stylesheet">
    <script src="libraries/zoomooz-master/jquery.zoomooz.js"></script>

</head>

<script>

    var socket = io.connect();
    var playerArray = new Array;
    var questionArrayOv = new Array;
    var i = 1;
    var j = 0;
    var linkLocation
    //wert muss noch variabel werden

  /*  window.onload = function () {
        socket.emit('overviewHtmlOnload');
    }
    */

    /*socket.on('overviewHtmlOnload', function (playerArray2) {
        playerArray = playerArray2;
       // console.log("erster"+ erster.nickname);
        fillNameFields(playerArray);
    });
*/
    //Clients verbinden sich //Blaue Felder füllemn :)
    socket.on('playerList', function (nicknameObj, playerArray7) {
        //Array mit Spielern füllen
        playerArray=playerArray7;
        console.log(nicknameObj.nickname + " just connected!");

        fillNameFields(playerArray);
    });


    socket.on('trueAnswer', function (playerArray5) {
        playerArray= playerArray5;
//        playerArray.forEach(function (player) {
//            if (schnellster.nickname == player.nickname) {
//                console.log("player.pkte: " + player.pkte);
//                player.pkte = schnellster.pkte;
//
//            }
//
//        });
        fillNameFields(playerArray);
    });


    socket.on('wrongAnswer', function (playerArray9) {
        playerArray= playerArray9;
        //playerArray.forEach(function (player) {
         //   if (schnellster.nickname == player.nickname) {
         //       console.log("player.pkte: " + player.pkte);
              //  player.pkte = schnellster.pkte;
                fillNameFields(playerArray9);
        //    }

       // });
    });

    socket.on('fastest player', function (player) {
        //document.getElementById("erster-text").innerHTML = player;
        $('#erster-text').text(player.nickname);
        playerArray.forEach(function (player2) {
            console.log("player2.nickname" + player2.nickname);
            if (player2.id == player.id) {
                console.log("das geht jetzt mal " +player2.id+" = "+player.id);
              //  document.getElementById("player" + player2.id + "-name").style = "visibility: hidden;";
            }
        });

    });


    socket.on('showQuestion', function (questionArray, tdId, indx) {
        console.log("tdId : " + tdId);
        console.log("qA: " + questionArray[indx]);

        questionStart2(questionArray, tdId, indx);



//Weiterleitung zur FragenSeite
  /*      window.setTimeout(" animation()", 100);
        linkLocation = "http://localhost:3000/question";
        $("body").fadeOut(1500, redirectPage);
        $("body").fadeOut(1500, redirectPage);
*/
    });

/*

    function redirectPage() {
        window.location = linkLocation;
    }
*/


    //Frage in Tabelle eintragen
    function questionStart2(questionArray, tdId, indx) {
        //  console.log("j: " + this.j);
        var question = questionArray[indx];
        console.log("question: " + question);
        console.log("question2: " + questionArray[indx]);
        console.log("tdId:: " + tdId);
     //   $('.zoomTarget').text(question);
        document.getElementById(tdId).innerHTML = question;

    }

    //Blaue Namensfelder werden befüllt
    function fillNameFields(playerArray2) {
        i = 1;
        playerArray2.forEach(function (player) {
            //  console.log("i: " + i + ", " + player.nickname, player.color);
            $('#player' + i + '-name').text(player.nickname + '    ' + player.pkte);
            console.log("geht" + player.id);

            document.getElementById("player" + i + "-name").style = "visibility:visible;";
            document.getElementById("player" + i + "-name").style.backgroundColor = player.color;
            //$('.player' + player.id + '-name').css('visibility','visible').hide().fadeIn("slow");
            //  $('.player' + player.id + '-name').fadeTo("slow", 1); // 100% visible


            i += 1;
        });
        // $('#player' + i + '-name').fadeIn;
        // console.log('#player' + player.id + '-name');
        // $('#player' + i + '-name').fadeIn("slow");


    }

   /* $(document).ready(function() {
        $(".zoomTarget").click(function(evt) {
            $(this).zoomTo({targetsize:0.75, duration:600});
            evt.stopPropagation();
        });
    });
*/

/*    $(document).ready(function() {
        $(".zoomTarget").click(function(evt) {
            $(this).zoomTo({targetsize:0.75, duration:600});
            evt.stopPropagation();
        });
    });*/





</script>


<body>
<!--Zoom Classen-->
<!--<div class="zoomViewport">
    <div class="zoomContainer">
        &lt;!&ndash;Über das Data-Attribut „data-targetsize“ kann ein kleinerer Vergrößerungsfaktor eingestellt werden:
        Erlaubt sind Werte zwischen Null und Eins. Der Wert „0.5“ vergrößert ein Element auf die halbe Fenstergröße.
        Es gibt weitere Data-Attribute zur Anpassung der Zoom-Elemente. Über „data-duration“ wird beispielsweise die
        Animationslänge in Millisekunden eingestellt.&ndash;&gt;
        <div class="zoomTarget"  data-targetsize="0.7" id="question0">100</div>
        <div class="zoomTarget"  data-targetsize="0.7" id="question1">100</div>
        <div class="zoomTarget"  data-targetsize="0.7" id="question2">100</div>
        <div class="zoomTarget"  data-targetsize="0.7" id="question3">100</div>

    </div>
</div>-->




<div><h1 id="heins">Wer ist dran?</h1></div>
<div id="erster">
    <h3 id="erster-text"> ... </h3>
</div>


<!--Fragen Tabelle-->

<div class="questionContainer-css">

    <table id="playerTable" class="questionUeberschrift-css">
        <thead>
        <tr>
            <th style="padding-left: 25px">Mainstockheim</th>
            <th style="padding-left: 25px">Familie</th>
            <th style="padding-left: 25px">Skuriles</th>
            <th style="padding-left: 25px">Romantisch</th>

        </tr>
        </thead>
        <tbody id="ctbody">
        <tr>

            <td class="zoomTarget" id="question0">100</td>
            <td class="zoomTarget" id="question1">100</td>
            <td class="zoomTarget" id="question2">100</td>
            <td class="zoomTarget" id="question3">100</td>
           <!-- <td class="questionBoxes-css" id="question0">100</td>
            <td class="questionBoxes-css" id="question1">100</td>
            <td class="questionBoxes-css" id="question2">100</td>
            <td class="questionBoxes-css" id="question3">100</td>-->
        </tr>
        <tr>
            <td class="questionBoxes-css" id="question4">200</td>
            <td class="questionBoxes-css" id="question5">200</td>
            <td class="questionBoxes-css" id="question6">200</td>
            <td class="questionBoxes-css" id="question7">200</td>
        </tr>
        <tr>
            <td class="questionBoxes-css" id="question8">300</td>
            <td class="questionBoxes-css" id="question9">300</td>
            <td class="questionBoxes-css" id="question10">300</td>
            <td class="questionBoxes-css" id="question11">300</td>


        </tr>
        <tr>
            <td class="questionBoxes-css" id="question12">400</td>
            <td class="questionBoxes-css" id="question13">400</td>
            <td class="questionBoxes-css" id="question14">400</td>
            <td class="questionBoxes-css" id="question15">400</td>


        </tr>


        </tbody>

    </table>

</div>



<!-- beigetretene Spieler Anzeige -->
<div class="playerNameContainer" id=playerNameContainerId>
    <div class="playerNameBoxes-css" id="player0-name">Enjoy</div>
    <div class="playerNameBoxes-css" id="player1-name">Enjoy</div>
    <div class="playerNameBoxes-css" id="player2-name">Enjoy</div>
    <div class="playerNameBoxes-css" id="player3-name">Enjoy</div>
    <div class="playerNameBoxes-css" id="player4-name">Enjoy</div>
</div>


</body>
</html>

<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>BuzzCaLu Overview Screen</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <link href="styles/overview.css" type="text/css" rel="stylesheet">
</head>

<script>

    var socket = io.connect();
    var playerArray = new Array;
    var questionArrayOv = new Array;
    var i = 1;
    var j = 0;
    //wert muss noch variabel werden


    //Clients verbinden sich
    socket.on('playerList', function (nicknameObj) {
        //Array mit Spielern füllen
        playerArray.push(nicknameObj);
        console.log(nicknameObj.nickname + " just connected!");

        fillNameFields();
    });


    socket.on('trueAnswer', function (schnellster) {
        playerArray.forEach(function (player) {
            if (schnellster.nickname == player.nickname) {
                console.log("player.pkte: " + player.pkte);
                player.pkte = schnellster.pkte;
                fillNameFields();
            }

        });
    });


    socket.on('wrongAnswer', function (schnellster) {
        playerArray.forEach(function (player) {
            if (schnellster.nickname == player.nickname) {
                console.log("player.pkte: " + player.pkte);
                player.pkte = schnellster.pkte;
                fillNameFields();
            }

        });
    });

    socket.on('fastest player', function (player) {
        //document.getElementById("erster-text").innerHTML = player;
        $('#erster-text').text(player.nickname);
    });

    /*socket.on('questionStart', function (questionArray) {
        this.questionArrayOv = questionArray;
        console.log("questionArray: " + this.questionArrayOv[0]);
        /!*questionStart2(questionArray);*!/
    });*/

    socket.on('showQuestion', function (questionArray, tdId) {
        console.log("tdId : " + tdId);

        questionStart2(questionArray, tdId);
        this.j++;
    });



    //Frage in Tabelle eintragen
    function questionStart2(questionArray,tdId) {
        console.log("j: " + this.j);
        var question = questionArray[this.j];
        console.log("question: " + question);
        console.log("question2: " + questionArray[this.j]);
        console.log("question3: " + questionArray[0]);
        document.getElementById(tdId).innerHTML = question;

    }

    //Blaue Namensfelder werden befüllt
    function fillNameFields() {
        i = 1;
        playerArray.forEach(function (player) {
            console.log("i: " + i + ", " + player.nickname);
            $('#player' + i + '-name').text(player.nickname + '    ' + player.pkte);
            console.log("i: " + i);
            document.getElementById("player" + i + "-name").style = "visibility:visible;";

            i += 1;
        });
    }


</script>


<body>


<div><h1 id="heins">Wer ist dran?</h1></div>
<div id="erster">
    <h3 id="erster-text"> ... </h3>
</div>


<!--Fragen Tabelle-->
<div class="questionContainer-css">

    <table id="playerTable" class="questionUeberschrift-css">
        <thead>
        <tr>
            <th style="padding-left: 25px">Mainstockheim</th>
            <th style="padding-left: 25px">Familie</th>
            <th style="padding-left: 25px">Skuriles</th>
            <th style="padding-left: 25px">Romantisch</th>

        </tr>
        </thead>
        <tbody id="ctbody">
        <tr>

            <!--  <td class="questionBoxes-css" id="question-text0" style="visibility:hidden;">Question</td>-->
            <td class="questionBoxes-css" id="question0">100</td>
            <td class="questionBoxes-css" id="question1">100</td>
            <td class="questionBoxes-css" id="question2">100</td>
            <td class="questionBoxes-css" id="question3">100</td>
        </tr>
        <tr>
            <td class="questionBoxes-css" id="question4">200</td>
            <td class="questionBoxes-css" id="question5">200</td>
            <td class="questionBoxes-css" id="question6">200</td>
            <td class="questionBoxes-css" id="question7">200</td>
        </tr>
        <tr>
            <td class="questionBoxes-css" id="question8">300</td>
            <td class="questionBoxes-css" id="question9">300</td>
            <td class="questionBoxes-css" id="question10">300</td>
            <td class="questionBoxes-css" id="question11">300</td>


        </tr>
        <tr>
            <td class="questionBoxes-css" id="question12">400</td>
            <td class="questionBoxes-css" id="question13">400</td>
            <td class="questionBoxes-css" id="question14">400</td>
            <td class="questionBoxes-css" id="question15">400</td>


        </tr>


        </tbody>

        <!-- Placeholder -->
    </table>

</div>


<!-- beigetretene Spieler Anzeige -->
<ul class="playerNameContainer">
    <ul class="playerNameBoxes-css" id="player1-name" style="visibility:hidden;">Enjoy</ul>
    <ul class="playerNameBoxes-css" id="player2-name" style="visibility:hidden;">Enjoy</ul>
    <ul class="playerNameBoxes-css" id="player3-name" style="visibility:hidden;">Enjoy</ul>
    <ul class="playerNameBoxes-css" id="player4-name" style="visibility:hidden;">Enjoy</ul>
    <ul class="playerNameBoxes-css" id="player5-name" style="visibility:hidden;">Enjoy</ul>
</ul>
</body>
</html>
